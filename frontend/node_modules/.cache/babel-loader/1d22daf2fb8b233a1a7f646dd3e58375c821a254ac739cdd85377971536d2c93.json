{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"/Users/pereraw.b.n/PAF project/frontend/src/pages/posts/PostsList.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { postAPI } from \"../../utils/api\";\nimport PostItem from \"../\";\nimport \"./PostsList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PostsList = () => {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n  const fetchPosts = async () => {\n    try {\n      setLoading(true);\n      const response = await postAPI.getAllPosts(page, 10); // 10 posts per page\n\n      if (response.data && response.data.data) {\n        const newPosts = response.data.data.content || [];\n        if (newPosts.length === 0) {\n          setHasMore(false);\n        } else {\n          setPosts(prev => page === 0 ? newPosts : [...prev, ...newPosts]);\n        }\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(\"Error fetching posts:\", err);\n      setError(\"Failed to load posts. \" + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.message || \"\"));\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchPosts();\n  }, [page]);\n  const loadMore = () => {\n    if (hasMore && !loading) {\n      setPage(prev => prev + 1);\n    }\n  };\n  if (loading && page === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"posts-loading\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading posts...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"posts-error\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"material-icons\",\n        children: \"error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Error Loading Posts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.reload(),\n        className: \"btn btn-primary\",\n        children: \"Try Again\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this);\n  }\n  if (posts.length === 0 && !loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-posts\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"material-icons\",\n        children: \"post_add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"No Posts Found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Be the first to create a post!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"posts-list\",\n    children: [posts.map(post => /*#__PURE__*/_jsxDEV(PostItem, {\n      post: post\n    }, post.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this)), loading && page > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"posts-loading-more\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading more posts...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this), hasMore && !loading && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: loadMore,\n      className: \"load-more-btn\",\n      children: \"Load More Posts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this), !hasMore && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-more-posts\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"You've reached the end of posts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s(PostsList, \"FXUq7SeBtk4qspCsllgAAgsrk+g=\");\n_c = PostsList;\nexport default PostsList;\nvar _c;\n$RefreshReg$(_c, \"PostsList\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useEffect","postAPI","PostItem","jsxDEV","_jsxDEV","PostsList","posts","setPosts","loading","setLoading","error","setError","page","setPage","hasMore","setHasMore","fetchPosts","response","getAllPosts","data","newPosts","content","length","prev","err","_err$response","_err$response$data","console","message","loadMore","className","children","fileName","lineNumber","columnNumber","onClick","window","location","reload","map","post","id","_c","$RefreshReg$"],"sources":["/Users/pereraw.b.n/PAF project/frontend/src/pages/posts/PostsList.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { postAPI } from \"../../utils/api\"\nimport PostItem from \"../\"\nimport \"./PostsList.css\"\n\nconst PostsList = () => {\n  const [posts, setPosts] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n  const [page, setPage] = useState(0)\n  const [hasMore, setHasMore] = useState(true)\n\n  const fetchPosts = async () => {\n    try {\n      setLoading(true)\n      const response = await postAPI.getAllPosts(page, 10) // 10 posts per page\n      \n      if (response.data && response.data.data) {\n        const newPosts = response.data.data.content || []\n        if (newPosts.length === 0) {\n          setHasMore(false)\n        } else {\n          setPosts(prev => page === 0 ? newPosts : [...prev, ...newPosts])\n        }\n      }\n    } catch (err) {\n      console.error(\"Error fetching posts:\", err)\n      setError(\"Failed to load posts. \" + (err.response?.data?.message || err.message || \"\"))\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchPosts()\n  }, [page])\n\n  const loadMore = () => {\n    if (hasMore && !loading) {\n      setPage(prev => prev + 1)\n    }\n  }\n\n  if (loading && page === 0) {\n    return (\n      <div className=\"posts-loading\">\n        <div className=\"loading-spinner\"></div>\n        <p>Loading posts...</p>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"posts-error\">\n        <i className=\"material-icons\">error</i>\n        <h2>Error Loading Posts</h2>\n        <p>{error}</p>\n        <button onClick={() => window.location.reload()} className=\"btn btn-primary\">\n          Try Again\n        </button>\n      </div>\n    )\n  }\n\n  if (posts.length === 0 && !loading) {\n    return (\n      <div className=\"no-posts\">\n        <i className=\"material-icons\">post_add</i>\n        <h2>No Posts Found</h2>\n        <p>Be the first to create a post!</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"posts-list\">\n      {posts.map(post => (\n        <PostItem key={post.id} post={post} />\n      ))}\n\n      {loading && page > 0 && (\n        <div className=\"posts-loading-more\">\n          <div className=\"loading-spinner small\"></div>\n          <p>Loading more posts...</p>\n        </div>\n      )}\n\n      {hasMore && !loading && (\n        <button onClick={loadMore} className=\"load-more-btn\">\n          Load More Posts\n        </button>\n      )}\n\n      {!hasMore && (\n        <div className=\"no-more-posts\">\n          <p>You've reached the end of posts</p>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default PostsList"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}