{"ast":null,"code":"import axios from \"axios\";\nimport { handleApiError } from \"./errorHandler\";\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || \"http://localhost:8080\",\n  timeout: 10000\n});\n\n// Request interceptor\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"token\");\n  if (token) {\n    config.headers[\"Authorization\"] = `Bearer ${token}`;\n  }\n  if (config.data instanceof FormData) {\n    delete config.headers[\"Content-Type\"];\n  } else if (config.data) {\n    config.headers[\"Content-Type\"] = \"application/json\";\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor\napi.interceptors.response.use(response => response.data, error => {\n  if (error.response) {\n    const {\n      status,\n      data\n    } = error.response;\n    if (status === 401) {\n      if (!window.location.pathname.includes(\"/login\") && !window.location.pathname.includes(\"/register\")) {\n        localStorage.removeItem(\"token\");\n        window.location.href = \"/login\";\n      }\n    }\n    return Promise.reject({\n      message: (data === null || data === void 0 ? void 0 : data.message) || \"An error occurred\",\n      status,\n      data\n    });\n  } else if (error.request) {\n    return Promise.reject({\n      message: \"No response received from server\",\n      isNetworkError: true\n    });\n  } else {\n    return Promise.reject({\n      message: error.message || \"Request setup failed\"\n    });\n  }\n});\n\n// API endpoints\nexport const authAPI = {\n  login: credentials => api.post(\"/api/auth/login\", credentials),\n  register: userData => api.post(\"/api/auth/register\", userData),\n  refreshToken: () => api.post(\"/api/auth/refresh-token\")\n};\nexport const userAPI = {\n  getUserByUsername: username => api.get(`/api/users/${username}`),\n  updateUser: (id, userData) => api.put(`/api/users/${id}`, userData),\n  searchUsers: query => api.get(`/api/users/search?query=${query}`),\n  getSuggestedUsers: (limit = 5) => api.get(`/api/users/suggested?limit=${limit}`),\n  followUser: id => api.post(`/api/users/${id}/follow`),\n  unfollowUser: id => api.post(`/api/users/${id}/unfollow`),\n  getFollowers: id => api.get(`/api/users/${id}/followers`),\n  getFollowing: id => api.get(`/api/users/${id}/following`),\n  uploadAvatar: file => {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    return api.post(\"/api/users/upload-avatar\", formData);\n  }\n};\nexport const postAPI = {\n  getAllPosts: (page = 0, size = 10) => api.get(`/api/posts?page=${page}&size=${size}`),\n  getPostById: id => api.get(`/api/posts/${id}`),\n  getPostsByUserId: (userId, page = 0, size = 10) => api.get(`/api/posts/user/${userId}?page=${page}&size=${size}`),\n  getFeedPosts: (page = 0, size = 10) => api.get(`/api/posts/feed?page=${page}&size=${size}`),\n  searchPosts: (query, page = 0, size = 10) => api.get(`/api/posts/search?query=${query}&page=${page}&size=${size}`),\n  createPost: (postData, config) => {\n    const formData = new FormData();\n    formData.append(\"post\", new Blob([JSON.stringify(postData)], {\n      type: \"application/json\"\n    }));\n    if (postData.media) {\n      formData.append(\"files\", postData.media);\n    }\n    return api.post(\"/api/posts/create\", formData, config);\n  },\n  updatePost: (id, postData) => api.put(`/api/posts/${id}`, postData),\n  deletePost: id => api.delete(`/api/posts/${id}`)\n};\nexport const commentAPI = {\n  getCommentsByPostId: (postId, page = 0, size = 10) => api.get(`/api/posts/${postId}/comments?page=${page}&size=${size}`),\n  createComment: (postId, commentData) => api.post(`/api/posts/${postId}/comments`, commentData),\n  updateComment: (postId, commentId, commentData) => api.put(`/api/posts/${postId}/comments/${commentId}`, commentData),\n  deleteComment: (postId, commentId) => api.delete(`/api/posts/${postId}/comments/${commentId}`)\n};\nexport const likeAPI = {\n  likePost: postId => api.post(`/api/posts/${postId}/likes`),\n  unlikePost: postId => api.delete(`/api/posts/${postId}/likes`),\n  getLikesCount: postId => api.get(`/api/posts/${postId}/likes/count`),\n  isPostLikedByUser: postId => api.get(`/api/posts/${postId}/likes/status`)\n};\nexport const storyAPI = {\n  getUserStories: userId => api.get(`/api/stories/user/${userId}`),\n  getFeedStories: () => api.get(\"/api/stories/feed\"),\n  createStory: (storyData, mediaFile) => {\n    const formData = new FormData();\n    formData.append(\"story\", new Blob([JSON.stringify(storyData)], {\n      type: \"application/json\"\n    }));\n    formData.append(\"media\", mediaFile);\n    return api.post(\"/api/stories\", formData);\n  },\n  viewStory: id => api.post(`/api/stories/${id}/view`),\n  deleteStory: id => api.delete(`/api/stories/${id}`)\n};\nexport default api;","map":{"version":3,"names":["axios","handleApiError","api","create","baseURL","process","env","REACT_APP_API_URL","timeout","interceptors","request","use","config","token","localStorage","getItem","headers","data","FormData","error","Promise","reject","response","status","window","location","pathname","includes","removeItem","href","message","isNetworkError","authAPI","login","credentials","post","register","userData","refreshToken","userAPI","getUserByUsername","username","get","updateUser","id","put","searchUsers","query","getSuggestedUsers","limit","followUser","unfollowUser","getFollowers","getFollowing","uploadAvatar","file","formData","append","postAPI","getAllPosts","page","size","getPostById","getPostsByUserId","userId","getFeedPosts","searchPosts","createPost","postData","Blob","JSON","stringify","type","media","updatePost","deletePost","delete","commentAPI","getCommentsByPostId","postId","createComment","commentData","updateComment","commentId","deleteComment","likeAPI","likePost","unlikePost","getLikesCount","isPostLikedByUser","storyAPI","getUserStories","getFeedStories","createStory","storyData","mediaFile","viewStory","deleteStory"],"sources":["/Users/pereraw.b.n/PAF project/frontend/src/utils/api.js"],"sourcesContent":["import axios from \"axios\"\nimport { handleApiError } from \"./errorHandler\"\n\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || \"http://localhost:8080\",\n  timeout: 10000,\n})\n\n// Request interceptor\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem(\"token\")\n    if (token) {\n      config.headers[\"Authorization\"] = `Bearer ${token}`\n    }\n\n    if (config.data instanceof FormData) {\n      delete config.headers[\"Content-Type\"]\n    } else if (config.data) {\n      config.headers[\"Content-Type\"] = \"application/json\"\n    }\n\n    return config\n  },\n  (error) => {\n    return Promise.reject(error)\n  }\n)\n\n// Response interceptor\napi.interceptors.response.use(\n  (response) => response.data,\n  (error) => {\n    if (error.response) {\n      const { status, data } = error.response\n      \n      if (status === 401) {\n        if (!window.location.pathname.includes(\"/login\") && \n            !window.location.pathname.includes(\"/register\")) {\n          localStorage.removeItem(\"token\")\n          window.location.href = \"/login\"\n        }\n      }\n      \n      return Promise.reject({\n        message: data?.message || \"An error occurred\",\n        status,\n        data,\n      })\n    } else if (error.request) {\n      return Promise.reject({\n        message: \"No response received from server\",\n        isNetworkError: true,\n      })\n    } else {\n      return Promise.reject({\n        message: error.message || \"Request setup failed\",\n      })\n    }\n  }\n)\n\n// API endpoints\nexport const authAPI = {\n  login: (credentials) => api.post(\"/api/auth/login\", credentials),\n  register: (userData) => api.post(\"/api/auth/register\", userData),\n  refreshToken: () => api.post(\"/api/auth/refresh-token\"),\n}\n\nexport const userAPI = {\n  getUserByUsername: (username) => api.get(`/api/users/${username}`),\n  updateUser: (id, userData) => api.put(`/api/users/${id}`, userData),\n  searchUsers: (query) => api.get(`/api/users/search?query=${query}`),\n  getSuggestedUsers: (limit = 5) => api.get(`/api/users/suggested?limit=${limit}`),\n  followUser: (id) => api.post(`/api/users/${id}/follow`),\n  unfollowUser: (id) => api.post(`/api/users/${id}/unfollow`),\n  getFollowers: (id) => api.get(`/api/users/${id}/followers`),\n  getFollowing: (id) => api.get(`/api/users/${id}/following`),\n  uploadAvatar: (file) => {\n    const formData = new FormData()\n    formData.append(\"file\", file)\n    return api.post(\"/api/users/upload-avatar\", formData)\n  },\n}\n\nexport const postAPI = {\n  getAllPosts: (page = 0, size = 10) => \n    api.get(`/api/posts?page=${page}&size=${size}`),\n  \n  getPostById: (id) => api.get(`/api/posts/${id}`),\n  \n  getPostsByUserId: (userId, page = 0, size = 10) => \n    api.get(`/api/posts/user/${userId}?page=${page}&size=${size}`),\n  \n  getFeedPosts: (page = 0, size = 10) => \n    api.get(`/api/posts/feed?page=${page}&size=${size}`),\n  \n  searchPosts: (query, page = 0, size = 10) => \n    api.get(`/api/posts/search?query=${query}&page=${page}&size=${size}`),\n  \n  createPost: (postData, config) => {\n    const formData = new FormData()\n    formData.append(\n      \"post\",\n      new Blob([JSON.stringify(postData)], {\n        type: \"application/json\"\n      })\n    )\n    \n    if (postData.media) {\n      formData.append(\"files\", postData.media)\n    }\n    \n    return api.post(\"/api/posts/create\", formData, config)\n  },\n  \n  updatePost: (id, postData) => api.put(`/api/posts/${id}`, postData),\n  deletePost: (id) => api.delete(`/api/posts/${id}`),\n}\n\nexport const commentAPI = {\n  getCommentsByPostId: (postId, page = 0, size = 10) =>\n    api.get(`/api/posts/${postId}/comments?page=${page}&size=${size}`),\n  \n  createComment: (postId, commentData) => \n    api.post(`/api/posts/${postId}/comments`, commentData),\n  \n  updateComment: (postId, commentId, commentData) => \n    api.put(`/api/posts/${postId}/comments/${commentId}`, commentData),\n  \n  deleteComment: (postId, commentId) => \n    api.delete(`/api/posts/${postId}/comments/${commentId}`),\n}\n\nexport const likeAPI = {\n  likePost: (postId) => api.post(`/api/posts/${postId}/likes`),\n  unlikePost: (postId) => api.delete(`/api/posts/${postId}/likes`),\n  getLikesCount: (postId) => api.get(`/api/posts/${postId}/likes/count`),\n  isPostLikedByUser: (postId) => api.get(`/api/posts/${postId}/likes/status`),\n}\n\nexport const storyAPI = {\n  getUserStories: (userId) => api.get(`/api/stories/user/${userId}`),\n  getFeedStories: () => api.get(\"/api/stories/feed\"),\n  \n  createStory: (storyData, mediaFile) => {\n    const formData = new FormData()\n    formData.append(\n      \"story\",\n      new Blob([JSON.stringify(storyData)], {\n        type: \"application/json\"\n      })\n    )\n    formData.append(\"media\", mediaFile)\n    return api.post(\"/api/stories\", formData)\n  },\n  \n  viewStory: (id) => api.post(`/api/stories/${id}/view`),\n  deleteStory: (id) => api.delete(`/api/stories/${id}`),\n}\n\nexport default api"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}